<html>
<head>
<style>
.button {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 10px 32px;
    text-align: left;
    display: inline-block;
    font-size: 16px;
    margin: 2px 2px;
    transition-duration: 0.4s;
    cursor: pointer;
}

.button:hover {
    color: black;
}
.button1 {
	background-color: #ccc;
    border: none;
    color: white;
    padding: 16px 32px;
    text-align: center;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    transition-duration: 0.4s;
    cursor: pointer;
}

.button1:hover {
	background-color: #B70000;
}

.button1:hover span {
	display:none
}
.button1:hover:before {
    content:"Obtain Nuts!";
}
.main-container {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	justify-content: center;
}

.upgrade-container{
	display: flex;
	flex-direction: column;
	flex-wrap: nowrap;
	justify-content: left;
}
.canvas-container{
	display: flex;
	flex-direction: column;
	flex-wrap: wrap;
	justify-content: center;
}

</style>
</head>
<div class="main-container">
<div class="canvas-container">
<canvas id="gameCanvas" width="800" height="800"></canvas>
<img id="mongogoN" src="./mongogoN.png" alt="Fix it" width="0" height="0">
<img id="mongogoFall" src="./mongogoFall.png" alt="Fix it" width="0" height="0">
<img id="mongogoFallR" src="./mongogoFallR.png" alt="Fix it" width="0" height="0">

<div><button class='button1' style='width:810px; height:120px; border-radius: 8px;' onclick='clicked()'><span>Obtain Nuts?</span></button>
</div>
</div>

<div class="upgrade-container">
<button id="treeBut" class='button' onclick="treeUp()"><span><img id='treePic' src="./mTreeG.png" align="center"></span><span>Mongogo Tree(20 Nuts)</span></button>
<button id="irrBut" class='button' onclick="irrUp()"><span><img src="./mIrrG.png" align="center"></span><span>African Tear Irrigation(80 Nuts)</span></button>
<button id="pressBut" class='button' onclick="pressUp()"><span><img src="./mPressG.png" align="center"></span><span>Nut Press(150 Nuts)</span></button>
<button id="crackerBut" class='button' onclick="crackerUp()"><span><img src="./mCrackerG.png" align="center"></span><span>Nut Cracker(400 Nuts)</span></button>
<button id="gmoBut" class='button' onclick="gmoUp()"><span><img src="./mGmoG.png" align="center"></span><span>GMO's(1000 Nuts)</span></button>
<button id="shackBut" class='button' onclick="shackUp()"><span><img src="./mShackG.png" align="center"></span><span>Nut Shack(1500 Nuts)</button>
<button id="truckBut" class='button' onclick="truckUp()"><span><img src="./mTruckG.png" align="center"></span><span>Nut Trucks(2000 Nuts)</span></button>
<button id="factoryBut" class='button' onclick="factoryUp()"><span><img src="./mFactoryG.png" align="center"></span><span>Nut Factory(5000 Nuts)</span></button>
<button id="rrBut" class='button' onclick="rrUp()"><span><img src="./mRrG.png" align="center"></span><span>Trans Continental Nut RR(9000 Nuts)</span></button>
<button id="mGadgetBut" class='button' onclick="mGadgetUp()"><span><img src="./mGadgetG.png" align="center"></span><span>Mongogo Go Go Nut Gadget(15000 Nuts)</span></button>
</div>
</div>
			<!-- <img src="./mTreeG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mIrrG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mPressG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mCrackerG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mGmoG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mShackG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mTruckG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mFactoryG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mRrG.png" alt="Fix it" width="32" height="32" align="middle">
			<img src="./mGadgetG.png" alt="Fix it" width="500" height="500" align="middle"> -->
<script>
c = document.getElementById('gameCanvas')
bkgrnd = document.getElementById('mongogoN')
mFall = document.getElementById('mongogoFall')
ctx = c.getContext('2d')
var mFallArr = [];
var upgrades = [
	treeObj = {butAttr: document.getElementById('treeBut'), price: 20, rate:0.5},
	irrObj = {butAttr: document.getElementById('irrBut'), price: 80, rate:1},
	pressObj = {butAttr: document.getElementById('pressBut'), price: 150, rate:2},
	crackerObj = {butAttr: document.getElementById('crackerBut'), price: 400, rate:7},
	gmoObj = {butAttr: document.getElementById('gmoBut'), price: 1000, rate:10},
	shackObj = {butAttr: document.getElementById('shackBut'), price: 1500, rate:13},
	truckObj = {butAttr: document.getElementById('truckBut'), price: 2000, rate:14},
	factoryObj = {butAttr: document.getElementById('factoryBut'), price: 5000, rate:18},
	rrObj = {butAttr: document.getElementById('rrBut'), price: 9000, rate:25},
	mGadgetObj = {butAttr: document.getElementById('mGadgetBut'), price: 15000, rate:30},
	];
var fallY = -80;
var fallX = -80;
var clicks = 0;
var n=0;
var mongogoRate = 0;
var mongogoNuts = 0;


class Nut{
	constructor() {
	this.x=Math.random()*(c.width-80);
	this.y=-40;
	this.run = true;
	}
	show() {
		if(this.run){
			if(mongogoNuts>10000){
				mFall = document.getElementById('mongogoFallR');
			}
		ctx.drawImage(mFall,this.x,this.y);
		this.y+=10;
		if(this.y>c.height) {
			this.run = false;
			}
		}
	}
}
window.onload = function(e){
ctx.drawImage(bkgrnd,0,0)
setInterval(function(){mongogoNuts+=mongogoRate}, 100)
update();
}

function nutCheck(upgradeObj){
	if(mongogoNuts<upgradeObj.price) {
		disable(upgradeObj,true)
	} else {
		disable(upgradeObj,false);
	}
}

function disable(upgradeObj,state){
	if(state) {
 		upgradeObj.butAttr.style.opacity = "0.6";
     	upgradeObj.butAttr.style.cursor = "not-allowed";
     } else {
     	upgradeObj.butAttr.style.opacity = "1";
     	upgradeObj.butAttr.style.cursor = "pointer";
 	}
}

function update(){
	drawAll();
	for(let i=0;i<upgrades.length;i++){
	nutCheck(upgrades[i]);
	}
	for(let i=0;i<mFallArr.length;i++){
	mFallArr[i].show();
	}
	window.requestAnimationFrame(update);
	}

function treeUp() {
	if(mongogoNuts>=upgrades[0].price) {
		mongogoNuts-=upgrades[0].price;
		mongogoRate+=upgrades[0].rate/10;
		document.getElementById("treeBut").innerHTML = '<img src="./mTreeG.png" align="center">'+'Mongogo Tree('+Math.round((upgrades[0].price*=1.5)*10)/10+' Nuts)';
	}
}

function irrUp() {
	if(mongogoNuts>=upgrades[1].price) {
		mongogoNuts-=upgrades[1].price;
		mongogoRate+=upgrades[1].rate/10;
		document.getElementById("irrBut").innerHTML = '<img src="./mIrrG.png" align="center">'+'African Tear Irrigation('+Math.round((upgrades[1].price*=1.5)*10)/10+' Nuts)';
	}
}

function pressUp() {
	if(mongogoNuts>=upgrades[2].price) {
		mongogoNuts-=upgrades[2].price;
		mongogoRate+=upgrades[2].rate/10;
		document.getElementById("pressBut").innerHTML = '<img src="./mPressG.png" align="center">'+'Nut Press('+Math.round((upgrades[2].price*=1.5)*10)/10+' Nuts)';
	}
}

function crackerUp() {
	if(mongogoNuts>=upgrades[3].price) {
		mongogoNuts-=upgrades[3].price;
		mongogoRate+=upgrades[3].rate/10;
		document.getElementById("crackerBut").innerHTML = '<img src="./mCrackerG.png" align="center">'+'Nut Cracker('+Math.round((upgrades[3].price*=1.5)*10)/10+' Nuts)';
	}
}

function gmoUp() {
	if(mongogoNuts>=upgrades[4].price) {
		mongogoNuts-=upgrades[4].price;
		mongogoRate+=upgrades[4].rate/10;
		document.getElementById("gmoBut").innerHTML = '<img src="./mGmoG.png" align="center">'+'GMO\'s('+Math.round((upgrades[4].price*=1.5)*10)/10+' Nuts)';
	}
}

function shackUp() {
	if(mongogoNuts>=upgrades[5].price) {
		mongogoNuts-=upgrades[5].price;
		mongogoRate+=upgrades[5].rate/10;
		document.getElementById("shackBut").innerHTML = '<img src="./mShackG.png" align="center">'+'Nut Shack('+Math.round((upgrades[5].price*=1.5)*10)/10+' Nuts)';
	}
}

function truckUp() {
	if(mongogoNuts>=upgrades[6].price) {
		mongogoNuts-=upgrades[6].price;
		mongogoRate+=upgrades[6].rate/10;
		document.getElementById("truckBut").innerHTML = '<img src="./mTruckG.png" align="center">'+'Nut Trucks('+Math.round((upgrades[6].price*=1.5)*10)/10+' Nuts)';
	}
}

function factoryUp() {
	if(mongogoNuts>=upgrades[7].price) {
		mongogoNuts-=upgrades[7].price;
		mongogoRate+=upgrades[7].rate/10;
		document.getElementById("factoryBut").innerHTML = '<img src="./mFactoryG.png" align="center">'+'Nut Factory('+Math.round((upgrades[7].price*=1.5)*10)/10+' Nuts)';
	}
}

function rrUp() {
	if(mongogoNuts>=upgrades[8].price) {
		mongogoNuts-=upgrades[8].price;
		mongogoRate+=upgrades[8].rate/10;
		document.getElementById("rrBut").innerHTML = '<img src="./mRrG.png" align="center">'+'Trans Continental Nut RR('+Math.round((upgrades[8].price*=1.5)*10)/10+' Nuts)';
	}
}

function mGadgetUp() {
	if(mongogoNuts>=upgrades[9].price) {
		mongogoNuts-=upgrades[9].price;
		mongogoRate+=upgrades[9].rate/10;
		document.getElementById("mGadgetBut").innerHTML = '<img src="./mGadgetG.png" align="center">'+'Mongogo Go Go Nut Gadget('+Math.round((upgrades[9].price*=1.5)*10)/10+' Nuts)';
	}
}
function drawAll(){
	ctx.drawImage(bkgrnd,0,0);
	ctx.fillStyle='red'
	ctx.font = "50px Impact";
	ctx.fillText("Mongogo Nuts: "+ Math.round(mongogoNuts), 10, 50);
	ctx.fillText("Nuts Per Second: "+ Math.round((mongogoRate*10)*10)/10, 10, 100);

/*var grd=ctx.createLinearGradient(0,0,1000,1000);
grd.addColorStop(0,"Aqua");
grd.addColorStop(1,"Chartreuse");*/
}

function clicked(event) {
	document.body.onkeydown = function(e){
    if(e.keyCode == 13){
		alert("Dont Cheat")
	}
}
	mFallArr[n] = new Nut();
	n++;
	if(n==20)
	n=0;
	clicks++;
	mongogoNuts++;
}


//Compression Function
function drawRect(canvasX,canvasY,rectX,rectY,color){
	ctx.fillStyle = color
	ctx.fillRect(canvasX,canvasY,rectX,rectY)
}

</script>
</html>